<!DOCTYPE html>
<html>
<head>
{%load static %}
<meta charset="utf-8">
<title>{{er.first_name}} - 大大大</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/>
<meta name="renderer" content="webkit"/>
<meta name="force-rendering" content="webkit"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

<link rel="stylesheet" href="{% static 'common/bootstrap-3.3.7/css/bootstrap.css' %}">
<link rel="stylesheet" href="{% static 'common/bootstrap-select-1.12.4/css/bootstrap-select.css' %}">
<link rel="stylesheet" href="{% static 'common/summernote-0.8.8/summernote.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'common/z_main.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'common/main.css' %}">

<script src="{%static 'common/jquery.js' %}"></script>
<script src="{% static 'common/bootstrap-3.3.7/js/bootstrap.js' %}"></script>
<script src="{% static 'common/bootstrap-select-1.12.4/js/bootstrap-select.js' %}"></script>
<script src="{% static 'common/bootstrap-select-1.12.4/js/i18n/defaults-zh_CN.js' %}"></script>
<script src="{% static 'common/summernote-0.8.8/summernote.js' %}"></script>
<script src="{% static 'common/summernote-0.8.8/lang/summernote-zh-CN.js' %}"></script>
<script src="{% static 'common/main.js' %}"></script>
<script>
function appendFollowElementSub(subcmd,ret)
{
    if(("followtos"==subcmd)||("followers"==subcmd))
    {
        var people_id=ret[0];
        var people_name=ret[1];
        var people_anwser_nums=ret[2];
        var people_avatar=ret[3];
        var people_mood=ret[4];
        var people_follower_nums=ret[5];
        var people_followed=ret[6];
        var people_followed_each=ret[7];
        if("1"==people_followed)
            var followed_html='<button class="Button FollowButton Button--primary Button--grey" type="button">已关注</button>';
        else
            var followed_html='<button class="Button FollowButton Button--primary Button--green" type="button">关注</button>';
        if("1"==people_followed_each)
            var followed_each_html='<span class="FollowStatus">相互关注</span>';
        else
            var followed_each_html='';
        var data='<div class="List-item"><div class="ContentItem"><div class="ContentItem-main"><div class="ContentItem-image"><span class="UserLink UserItem-avatar"><div class="Popover"><div id="Popover-28784-64463-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover-28784-64463-content"><a class="UserLink-link" target="_blank" href="/er/'+people_id+'">\
                <img class="Avatar Avatar--large UserLink-avatar" width="60" height="60" src="'+people_avatar+'" srcset="'+people_avatar+'" alt="'+people_name+'"></a></div></div></span></div><div class="ContentItem-head"><h2 class="ContentItem-title"><div class="UserItem-title"><span class="UserLink UserItem-name"><div class="Popover"><div id="Popover-28784-44728-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover-28784-44728-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="/er/'+people_id+'">'+people_name+'</a></div></div></span>'+followed_each_html+'</div></h2><div class="ContentItem-meta"><div><div class="RichText">'+people_mood+'</div>\
                <div class="ContentItem-status"><span class="ContentItem-statusItem">'+people_anwser_nums+' 回答</span><span class="ContentItem-statusItem">0 文章</span><span class="ContentItem-statusItem">'+people_follower_nums+' 关注者</span></div></div></div></div><div class="ContentItem-extra">'+followed_html+'</div></div></div></div>';
        $("#Append-element").append(data);
    }
    else if("topics"==subcmd)
    {
        var topic_id=ret[0];
        var topic_name=ret[1];
        var topic_avatar=ret[2];
        var topic_detail=ret[3];
        
        var data='<div class="List-item"><div class="ContentItem"><div class="ContentItem-main"><div class="ContentItem-image"><img class="Avatar Avatar--large" width="60" height="60" src="'+topic_avatar+'" srcset="'+topic_avatar+' 2x"></div><div class="ContentItem-head"><h2 class="ContentItem-title"><a class="TopicLink" href="/topic/'+topic_id+'" target="_blank"><div class="Popover"><div id="Popover-92518-2569-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover-92518-2569-content">'+topic_name+'</div></div></a></h2><div class="ContentItem-meta"><div class="ContentItem-status">'+topic_detail+'</div></div></div></div></div></div>';
        $("#Append-element").append(data);
    }
    else if("questions"==subcmd)
    {
        var question_id=ret[0];
        var question_title=ret[1];
        var question_pubdate=ret[2];
        var question_answer_nums=ret[3];
        var question_follower_nums=ret[4];
        var data='\
                <div class="List-item">\
                <div class="ContentItem" ><h2 class="ContentItem-title"><div class="QuestionItem-title">\
                <a href="/question/'+question_id+'" target="_blank">'+question_title+'</a></div></h2>\
                <div class="ContentItem-status"><span class="ContentItem-statusItem">'+question_pubdate+'</span><span class="ContentItem-statusItem">'+question_answer_nums+' 个回答</span><span class="ContentItem-statusItem">'+question_follower_nums+' 个关注</span></div></div></div>\
                ';
        $("#Append-element").append(data);
    }
}

function appendFollowElement(subcmd)
{
    var data='<div class="List" id="Profile-following"><div class="List-header"><h4 class="List-headerText"><div class="SubTabs">\
    <a class="SubTabs-item" href="/er/'+er_id+'/following/followtos">'+who_han+'关注的人</a>\
    <a class="SubTabs-item" href="/er/'+er_id+'/following/followers">关注'+who_han+'的人</a>\
    <a class="SubTabs-item" href="/er/'+er_id+'/following/topics">'+who_han+'关注的话题</a>\
    <a class="SubTabs-item" href="/er/'+er_id+'/following/questions">'+who_han+'关注的问题</a>\
    </div></h4></div><div id="Append-element"></div></div>';
    $("#ProfileMain").append(data);
    
    $(".SubTabs-item").each(function(){
        if($(this).attr("href"))
        {
            if($(this).attr("href").indexOf(subcmd)>-1)
                $(this).addClass("is-active");
        }
    });
    
    $.get("/ajax/er/"+er_id+"/following/"+subcmd+"/",function(ret){
        if("fail"!=ret)
        {
            for(i in ret)
                appendFollowElementSub(subcmd,ret[i]);
        }
    });
}

function appendAnswerElementSub(ret)
{    
    answer_id=ret[0];
    question_id=ret[1];
    question_title=ret[2];
    answer_content=ret[3];
    answer_like_nums=ret[4];
    index_img_url=getIndexImg(answer_content);
    var data='\
        <div class="List-item">\
        <div class="ContentItem AnswerItem">\
        <h2 class="ContentItem-title">\
        <div>\
        <a target="_blank" data-za-detail-view-element_name="Title" href="/question/'+question_id+'/?answer='+answer_id+'">'+question_title+'</a>\
        </div>\
        </h2>\
        <div class="ContentItem-meta">\
        <div class="AnswerItem-meta">\
        <div class="AuthorInfo">\
        <span class="UserLink AuthorInfo-avatarWrapper">\
        <a class="UserLink-link" href="/er/'+er_id+'/answers/">\
        <img class="Avatar AuthorInfo-avatar PeoplePopover" width="38" height="38" src="'+er_avatar+'" srcset="'+er_avatar+'" alt="'+er_name+'" data-author-id="'+er_id+'" data-toggle="popover" data-placement="right" data-trigger="manual" data-content="null" data-html="true"></a>\
        </span>\
        <div class="AuthorInfo-content">\
        <div class="AuthorInfo-head">\
        <span class="UserLink AuthorInfo-name">\
        <a class="UserLink-link" data-za-detail-view-element_name="User" href="/er/'+er_id+'/answers/">'+er_name+'</a>\
        </span>\
        </div>\
        <div class="AuthorInfo-detail">\
        <div class="AuthorInfo-badge">\
        <div class="RichText AuthorInfo-badgeText">'+er_mood+'</div>\
        </div>\
        </div>\
        </div>\
        </div>\
        <div class="AnswerItem-extraInfo">\
        <span class="Voters">\
        <button class="Button Button--plain" type="button">'+answer_like_nums+' 人赞同了该回答</button>\
        </span>\
        </div>\
        </div>\
        </div>\
        <div class="RichContent is-collapsed">\
        <div class="RichContent-cover">\
        <div class="RichContent-cover-inner" data-index-img-url="'+index_img_url+'"></div>\
        <div class="RichContent-cover-play"><svg viewBox="0 0 64 64" class="Icon Icon--play" width="50" height="50" aria-hidden="true" style="height: 50px; width: 50px;"><title></title><g><path fill-opacity="0.9" fill="#fff" d="M32,64 C14.326888,64 0,49.673112 0,32 C0,14.326888 14.326888,0 32,0 C49.673112,0 64,14.326888 64,32 C64,49.673112 49.673112,64 32,64 Z M32.2363929,61.6 C48.5840215,61.6 61.8363929,48.3476286 61.8363929,32 C61.8363929,15.6523714 48.5840215,2.4 32.2363929,2.4 C15.8887643,2.4 2.63639293,15.6523714 2.63639293,32 C2.63639293,48.3476286 15.8887643,61.6 32.2363929,61.6 Z"></path>   <circle fill-opacity="0.3" fill="#000" cx="32" cy="32" r="29.6"></circle>   <path fill-opacity="0.9" fill="#fff" d="M43.5634409,30.7271505 C44.6882014,31.4301259 44.6868607,32.5707121 43.5634409,33.2728495 L28.4365591,42.7271505 C27.3117986,43.4301259 26.4,42.9221451 26.4,41.5999847 L26.4,22.4000153 C26.4,21.0745235 27.3131393,20.5707121 28.4365591,21.2728495 L43.5634409,30.7271505 Z"></path></g></svg></div>\
        </div>\
        <div class="RichContent-inner">\
        <span class="RichText CopyrightRichText-richText less">'+removeImg(answer_content)+'</span>\
        <span class="RichText CopyrightRichText-richText more is-hide">'+answer_content+'</span>\
        <button class="Button ContentItem-more NC-RichContent-type1 Button--plain" type="button">阅读全文<svg viewBox="0 0 10 6" class="Icon ContentItem-arrowIcon Icon--arrow" width="10" height="16" aria-hidden="true" style="height: 16px; width: 10px;"><title></title><g><path d="M8.716.217L5.002 4 1.285.218C.99-.072.514-.072.22.218c-.294.29-.294.76 0 1.052l4.25 4.512c.292.29.77.29 1.063 0L9.78 1.27c.293-.29.293-.76 0-1.052-.295-.29-.77-.29-1.063 0z"></path></g></svg></button>\
        </div>\
        <div class="ContentItem-actions">\
        <span>\
        <button class="AnswerLike Button LikeButton 1ContentItem-action" type="button" data-answer-id="'+answer_id+'">\
        <svg viewBox="0 0 20 18" xmlns="http://www.w3.org/2000/svg" class="Icon 1Icon--like" style="height:16px;width:13px;" width="13" height="16" aria-hidden="true" data-reactid="433"><title data-reactid="434"></title><g data-reactid="435"><path d="M.718 7.024c-.718 0-.718.63-.718.63l.996 9.693c0 .703.718.65.718.65h1.45c.916 0 .847-.65.847-.65V7.793c-.09-.88-.853-.79-.846-.79l-2.446.02zm11.727-.05S13.2 5.396 13.6 2.89C13.765.03 11.55-.6 10.565.53c-1.014 1.232 0 2.056-4.45 5.83C5.336 6.965 5 8.01 5 8.997v6.998c-.016 1.104.49 2 1.99 2h7.586c2.097 0 2.86-1.416 2.86-1.416s2.178-5.402 2.346-5.91c1.047-3.516-1.95-3.704-1.95-3.704l-5.387.007z"></path></g></svg>'+answer_like_nums+'\
        </button>\
        </span>\
        <button class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel" type="button">\
        <span style="display: inline-flex; align-items: center;">&#8203;<svg class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"></path></svg></span>696 条评论</button>\
        <div class="Popover ShareMenu ContentItem-action">\
        <div class="" id="Popover-94553-53870-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover-94553-53870-content">\
        <img class="ShareMenu-fakeQRCode" src="https://www.zhihu.com/qrcode?url=https%3A%2F%2Fwww.zhihu.com%2Fanswer%2F269059485%23showWechatShareTip" alt="微信二维码">\
        <button class="Button Button--plain Button--withIcon Button--withLabel" type="button"><span style="display: inline-flex; align-items: center;">&#8203;<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button>\
        </div>\
        </div>\
        <button class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel" type="button"><span style="display: inline-flex; align-items: center;">&#8203;<svg class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"></path></svg></span>收藏</button>\
        <button class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel" type="button"><span style="display: inline-flex; align-items: center;">&#8203;<svg class="Zi Zi--Heart Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z" fill-rule="evenodd"></path></svg></span>感谢</button>\
        <div class="Popover ContentItem-action"><button class="Button Button--plain Button--withIcon Button--iconOnly" aria-label="更多" type="button" id="Popover-94553-60105-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover-94553-60105-content"><span style="display: inline-flex; align-items: center;">&#8203;<svg class="Zi Zi--Dots Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" fill-rule="evenodd"></path></svg></span></button>\
        </div>\
        <button class="Button ContentItem-less NC-RichContent-type1 ContentItem-rightButton Button--plain is-hide" type="button">\
        <span class="RichContent-collapsedText">收起</span>\
        <svg viewBox="0 0 10 6" class="Icon ContentItem-arrowIcon is-active Icon--arrow" width="10" height="16" aria-hidden="true" style="height: 16px; width: 10px;"><title></title><g><path d="M8.716.217L5.002 4 1.285.218C.99-.072.514-.072.22.218c-.294.29-.294.76 0 1.052l4.25 4.512c.292.29.77.29 1.063 0L9.78 1.27c.293-.29.293-.76 0-1.052-.295-.29-.77-.29-1.063 0z"></path></g></svg>\
        </button>\
        </div>\
        </div>\
        </div>\
        </div>';
    $("#Append-element").append(data);
}
function appendAnswerElement()
{
    var data='<div class="List Profile-answers" id="11Profile-answers" data-zop-feedlistfather="1">\
            <div class="List-header">\
            <h4 class="List-headerText"><span>'+who_han+'的回答</span></h4>\
            </div>\
            <div id="Append-element">\
            </div>\
            </div>\
            ';
    $("#ProfileMain").append(data);
    $.get("/ajax/er/"+er_id+"/"+command+"/",function(ret){
        if("fail"!=ret)
        {
            for(i in ret)
                appendAnswerElementSub(ret[i]);
            checkSets();
        }
    });
}
function appendQuestionElementSub(ret)
{
    var question_id=ret[0];
    var question_title=ret[1];
    var question_pubdate=ret[2];
    var question_answer_nums=ret[3];
    var question_follower_nums=ret[4];
    var data='\
            <div class="List-item">\
            <div class="ContentItem" ><h2 class="ContentItem-title"><div class="QuestionItem-title">\
            <a href="/question/'+question_id+'" target="_blank">'+question_title+'</a></div></h2>\
            <div class="ContentItem-status"><span class="ContentItem-statusItem">'+question_pubdate+'</span><span class="ContentItem-statusItem">'+question_answer_nums+' 个回答</span><span class="ContentItem-statusItem">'+question_follower_nums+' 个关注</span></div></div></div>\
            ';
    $("#Append-element").append(data);
}
function appendQuestionElement()
{
    data='<div class="List Profile-answers" id="Profile-answers">\
            <div class="List-header">\
            <h4 class="List-headerText"><span>'+who_han+'的问题</span></h4>\
            </div>\
            <div id="Append-element">\
            </div>\
            </div>\
            ';
    $("#ProfileMain").append(data);
    $.get("/ajax/er/"+er_id+"/"+command+"/",function(ret){
        if("fail"!=ret)
        {
            for(i in ret)
                appendQuestionElementSub(ret[i]);
            checkSets();
        }
    });
}

function profileEdit()
{
    $("main").empty();
	var data='\
			<div class="ProfileEdit">\
			<div class="Card">\
			<div class="ProfileHeader-header">\
			<div class="UserCoverEditor">\
			<div>\
			<div class="UserCoverGuide">\
			<div class="UserCoverGuide-inner">\
			<div class="UserCoverGuide-buttonContainer">\
			<button class="Button DynamicColorButton" type="button"><svg viewBox="0 0 20 16" class="Icon Icon--camera Icon--left" width="14" height="16" aria-hidden="true" style="height: 16px; width: 14px;"><title></title><g><path d="M18.094 2H15s-1-2-2-2H7C6 0 5 2 5 2H2C0 2 0 3.967 0 3.967V14c0 2 2.036 2 2.036 2H17c3 0 3-1.983 3-1.983V4c0-2-1.906-2-1.906-2zM10 12c-1.933 0-3.5-1.567-3.5-3.5S8.067 5 10 5s3.5 1.567 3.5 3.5S11.933 12 10 12zm0 1.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm7.5-8c-.552 0-1-.448-1-1s.448-1 1-1 1 .448 1 1-.448 1-1 1z" fill-rule="evenodd"></path></g></svg>上传封面图片</button>\
			</div>\
			<div class="UserCoverGuide-dialog">\
			<h4 class="UserCoverGuide-dialogHead">上传一张图片，展示在这里</h4>\
			<div class="UserCoverGuide-dialogContent">\
			<p class="UserCoverGuide-dialogDescription">你可以使用自己的摄影作品、你喜欢的照片，或是任何能展现你特质的图片。</p>\
			<a href="https://www.danongling.com/question/21757507" target="_blank" rel="noopener noreferrer">哪里能找到可免费使用的优质图片？</a>\
			</div>\
			</div>\
			</div>\
			<ul class="UserCoverGuide-items">\
			</ul>\
			</div>\
			<div class="UserCover"></div>\
			</div>\
			<input type="file" accept="image/png,image/jpeg" style="display: none;">\
			</div></div>\
			<div class="ProfileHeader-main"><div>\
			<div class="UserAvatarEditor ProfileHeader-avatar">\
			<div class="UserAvatar">\
			<img id="id_avatar" class="Avatar Avatar--large UserAvatar-inner" width="160" height="160" src="{{user.userprofile.avatar}}" srcset="{{user.userprofile.avatar}}">\
			</div>\
			<div class="Mask UserAvatarEditor-mask">\
			<div class="Mask-mask Mask-mask--black UserAvatarEditor-maskInner">\
			</div>\
			<div class="Mask-content">\
			<svg class="Zi Zi--Camera UserAvatarEditor-cameraIcon" fill="currentColor" viewBox="0 0 24 24" width="36" height="36"><path d="M20.094 6S22 6 22 8v10.017S22 20 19 20H4.036S2 20 2 18V7.967S2 6 4 6h3s1-2 2-2h6c1 0 2 2 2 2h3.094zM12 16a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7zm0 1.5a5 5 0 1 0-.001-10.001A5 5 0 0 0 12 17.5zm7.5-8a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" fill-rule="evenodd"></path></svg>\
			<div class="UserAvatarEditor-maskInnerText">修改我的头像</div>\
			</div>\
			</div>\
			<input id="id_avatar_input" name="file" type="file" accept="image/png,image/jpeg" style="display: none;">\
			</div>\
			</div>\
			<div class="ProfileHeader-content">\
			<div class="ProfileHeader-contentHead">\
			<h1 class="ProfileHeader-title"><span class="ProfileHeader-name">{{user.first_name}}</span></h1>\
			<div class="ProfileHeader-expandActions ProfileEdit-expandActions">\
			<a class="Button Button--plain" type="button" href="/er/{{user.id}}">返回我的主页<svg viewBox="0 0 10 6" class="Icon ProfileEdit-arrowIcon Icon--arrow" width="10" height="16" aria-hidden="true" style="height: 16px; width: 10px;"><title></title><g><path d="M8.716.217L5.002 4 1.285.218C.99-.072.514-.072.22.218c-.294.29-.294.76 0 1.052l4.25 4.512c.292.29.77.29 1.063 0L9.78 1.27c.293-.29.293-.76 0-1.052-.295-.29-.77-.29-1.063 0z"></path></g></svg></a>\
			</div>\
			</div>\
			<div class="ProfileEdit-fields">\
			<form class="Field"><h3 class="Field-label">性别</h3><div class="Field-content"><div><span class="Field-text">{{user.userprofile.sexual}}</span><button class="Button ModifyButton Field-modify Field-modify-hidden Button--link" type="button"><svg viewBox="0 0 12 12" class="Icon ModifyButton-icon Icon--modify" width="12" height="16" aria-hidden="true" style="height: 16px; width: 12px;"><title></title><g><path d="M.423 10.32L0 12l1.667-.474 1.55-.44-2.4-2.33-.394 1.564zM10.153.233c-.327-.318-.85-.31-1.17.018l-.793.817 2.49 2.414.792-.814c.318-.328.312-.852-.017-1.17l-1.3-1.263zM3.84 10.536L1.35 8.122l6.265-6.46 2.49 2.414-6.265 6.46z" fill-rule="evenodd"></path></g></svg>修改</button></div></div></form>\
			<form class="Field"><h3 class="Field-label">一句话介绍</h3><div class="Field-content"><div><span class="Field-text"><span class="RichText">{{user.userprofile.mood}}</span></span><button class="Button ModifyButton Field-modify Field-modify-hidden Button--link" type="button"><svg viewBox="0 0 12 12" class="Icon ModifyButton-icon Icon--modify" width="12" height="16" aria-hidden="true" style="height: 16px; width: 12px;"><title></title><g><path d="M.423 10.32L0 12l1.667-.474 1.55-.44-2.4-2.33-.394 1.564zM10.153.233c-.327-.318-.85-.31-1.17.018l-.793.817 2.49 2.414.792-.814c.318-.328.312-.852-.017-1.17l-1.3-1.263zM3.84 10.536L1.35 8.122l6.265-6.46 2.49 2.414-6.265 6.46z" fill-rule="evenodd"></path></g></svg>修改</button></div></div></form>\
			<form class="Field"><h3 class="Field-label">居住地</h3><div class="Field-content"><div class="AddButton"><button class="Button Button--link" type="button"><svg viewBox="0 0 18 18" class="Icon AddButton-icon Icon--add Icon--left" width="20" height="20" aria-hidden="true" style="height: 20px; width: 20px;"><title></title><g><g fill-rule="evenodd"><path d="M6.035 16.433c-.875-.35-1.678-.848-2.383-1.482-.205-.184-.52-.167-.707.04-.185.204-.167.52.038.705.794.714 1.696 1.274 2.682 1.668.06.023.123.035.185.035.198 0 .386-.12.464-.314.103-.258-.022-.55-.28-.65zM1.097 10.247C1.054 9.975.8 9.79.525 9.83c-.273.043-.46.3-.417.57.154.98.467 1.925.93 2.803.09.17.264.267.443.267.08 0 .16-.02.234-.058.244-.13.338-.432.208-.676-.41-.78-.69-1.618-.825-2.49zM9.106 1c.95.014 1.878.19 2.76.528.058.022.118.033.178.033.2 0 .39-.12.467-.32.1-.258-.03-.547-.287-.646C11.233.214 10.19.014 9.12 0h-.007c-.273 0-.496.22-.5.493-.003.278.218.504.493.508zM3.73 2.83c.108 0 .218-.034.31-.107.693-.55 1.465-.976 2.295-1.27.26-.09.397-.377.305-.637C6.548.556 6.263.42 6.002.51 5.068.84 4.2 1.323 3.42 1.94c-.217.17-.254.485-.083.702.1.124.245.19.393.19zM2.01 4.136c-.236-.144-.544-.07-.688.165-.557.91-.945 1.9-1.15 2.944-.055.27.12.534.392.587.033.008.065.01.098.01.234 0 .443-.164.49-.402.184-.927.528-1.807 1.023-2.614.144-.236.07-.543-.165-.688zM14.927 2.228c-.207-.183-.523-.162-.705.047-.182.208-.16.523.047.706.664.583 1.224 1.265 1.665 2.028.092.16.26.25.433.25.085 0 .17-.02.25-.067.24-.137.32-.443.183-.682-.495-.86-1.125-1.626-1.873-2.28zM17.294 7.07c-.27.047-.454.306-.408.578.076.44.114.896.114 1.35 0 .493-.046.984-.133 1.46-.05.27.13.532.402.582.03.005.06.008.09.008.236 0 .446-.17.49-.41.1-.534.148-1.085.15-1.638 0-.513-.044-1.025-.13-1.52-.045-.273-.303-.457-.576-.41zM16.566 12.91c-.235-.14-.544-.065-.686.174-.452.76-1.02 1.434-1.692 2.005-.21.18-.235.494-.057.704.1.116.24.176.382.176.115 0 .23-.04.324-.12.754-.643 1.395-1.4 1.903-2.254.142-.238.064-.544-.174-.686zM11.766 16.51c-.884.325-1.814.49-2.772.49l-.208-.002c-.283-.02-.505.21-.513.487-.007.275.21.506.487.513L9 18c1.07 0 2.116-.186 3.11-.553.26-.095.393-.383.297-.642-.095-.26-.385-.392-.64-.295zM9.8 8.2V6.3c0-.442-.358-.8-.8-.8-.442 0-.8.358-.8.8v1.9H6.3c-.442 0-.8.358-.8.8 0 .442.358.8.8.8h1.9v1.9c0 .442.358.8.8.8.442 0 .8-.358.8-.8V9.8h1.9c.442 0 .8-.358.8-.8 0-.442-.358-.8-.8-.8H9.8z"></path></g></g></svg>添加居住地</button></div><div class="Field-list"><div class="Field-card" draggable="true"><img class="Avatar Field-avatar" width="20" height="20" src="https://pic4.zhimg.com/e82bab09c_s.jpg" srcset="https://pic4.zhimg.com/e82bab09c_xs.jpg 2x"><span>{{user.userprofile.residence}}</span></div></div></div></form>\
			<form class="Field"><h3 class="Field-label">所在行业</h3><div class="Field-content"><div><span class="Field-text">{{user.userprofile.job}}</span><button class="Button ModifyButton Field-modify Field-modify-hidden Button--link" type="button"><svg viewBox="0 0 12 12" class="Icon ModifyButton-icon Icon--modify" width="12" height="16" aria-hidden="true" style="height: 16px; width: 12px;"><title></title><g><path d="M.423 10.32L0 12l1.667-.474 1.55-.44-2.4-2.33-.394 1.564zM10.153.233c-.327-.318-.85-.31-1.17.018l-.793.817 2.49 2.414.792-.814c.318-.328.312-.852-.017-1.17l-1.3-1.263zM3.84 10.536L1.35 8.122l6.265-6.46 2.49 2.414-6.265 6.46z" fill-rule="evenodd"></path></g></svg>修改</button></div></div></form>\
			<form class="Field"><h3 class="Field-label">个人简介</h3><div class="Field-content"><div class="DescriptionField-content"><span class="Field-text"><span class="RichText">{{user.userprofile.intro}}</span></span><button class="Button ModifyButton Field-modify Field-modify-hidden Button--link" type="button"><svg viewBox="0 0 12 12" class="Icon ModifyButton-icon Icon--modify" width="12" height="16" aria-hidden="true" style="height: 16px; width: 12px;"><title></title><g><path d="M.423 10.32L0 12l1.667-.474 1.55-.44-2.4-2.33-.394 1.564zM10.153.233c-.327-.318-.85-.31-1.17.018l-.793.817 2.49 2.414.792-.814c.318-.328.312-.852-.017-1.17l-1.3-1.263zM3.84 10.536L1.35 8.122l6.265-6.46 2.49 2.414-6.265 6.46z" fill-rule="evenodd"></path></g></svg>修改</button></div></div></form>\
			</div>\
			</div>\
			</div>\
			</div>\
			</div>';
    $("main").append(data);
}
function adjustChooseBox()
{
    var width=200;
    var height=200;
    var left=$("#preview_avatar").position().left+50;
    var top=$("#preview_avatar").position().top+50;
   
    var refLeft=$("#preview_avatar").position().left;
    var refTop=$("#preview_avatar").position().top;
    console.log(refLeft);
    console.log(refTop);
    /* 
    console.log($("#preview_avatar").offset().left);
    console.log($("#preview_avatar").offset().top);
    console.log($("#preview_avatar").position().left);
    console.log($("#preview_avatar").position().top);
    console.log($("#chooseBox").offset().left);
    console.log($("#chooseBox").offset().top);
    console.log($("#chooseBox").position().left);
    console.log($("#chooseBox").position().top);
    */
    
    var adjust=$("#adjust_choosebox").val();
    width=width+(adjust-50)*2;
    height=height+(adjust-50)*2;
    left=left-adjust+50;
    top=top-adjust+50;
    
    $('#chooseBox').css({
                    width:width+'px',
                    height:height+'px',
                    left:left+'px',
                    top:top+'px'
    });
    
    
    $('#chooseBox').mousedown(function (e) {
            var originX= e.offsetX;
            var originY= e.offsetY;
            left=$("#chooseBox").position().left;
            top=$("#chooseBox").position().top;
            console.log("mousedown");
            window.onmousemove=function (e) {
                //console.log("x=",originX,e.offsetX);
                //console.log("y=",originY,e.offsetY);
                //console.log($("#chooseBox").position().left);
                //console.log($("#chooseBox").position().top);
                $('#chooseBox').css({
                    position:'absolute',
                    left:left+e.offsetX-originX+'px',
                    top: top+e.offsetY-originY+'px'
                });              
                
                if($('#chooseBox').position().left<=refLeft){
                    $('#chooseBox').css({
                        left:refLeft+'px'
                    });
                }
                if($('#chooseBox').position().left>=refLeft+300-width){
                    $('#chooseBox').css({
                        left:refLeft+300-width+'px'
                    });
                }
                if($('#chooseBox').position().top<=refTop){
                    $('#chooseBox').css({
                        top:refTop+'px'
                    });
                }
                if($('#chooseBox').position().top>=refTop+300-height){
                    $('#chooseBox').css({
                        top:refTop+300-height+'px'
                    });
                }
                
                $('#chooseBox').mouseout(function () {
                    console.log("mouseout");
                    window.onmousemove=null;
                    return
                })
            };
            window.onmouseup= function () {
                console.log("onmouseup");
                window.onmousemove=null;
                return
            }
        });
}
//$(function(){
function checkAvatar(){
    $(".UserAvatarEditor").hover(
        function(){
            $(".Mask").removeClass("Mask-hidden");
        },
        function(){
            $(".Mask").addClass("Mask-hidden");
        }
    );
    
    $(".Mask-content").click(function(){
            $("#id_avatar_input").click();
            $("#id_avatar_input").on("change",function(){
               $("#upAvatarModal").modal('show');
                var objUrl = getObjectURL(this.files[0]) ; //获取图片的路径，该路径不是图片在本地的路径
                if (objUrl) {
                    //var image = new Image();
                    //image.src="/media/avatar/wudy1512464583.jpg";//objUrl;
                    //var cvs=document.getElementById("avatar_canvas");
                    //var ctx = cvs.getContext('2d');
                    //ctx.drawImage(image, 100, 100, 240, 240);  
                    $("#preview_avatar").attr("src", objUrl) ; //将图片路径存入src中，显示出图片
                    $("#adjust_choosebox").val(50);                    
                    
                    setTimeout(adjustChooseBox,1*1000);
                }
            });
    });
}
//});

//建立一個可存取到該file的url
function getObjectURL(file) {
var url = null ;
if (window.createObjectURL!=undefined) { // basic
url = window.createObjectURL(file) ;
} else if (window.URL!=undefined) { // mozilla(firefox)
url = window.URL.createObjectURL(file) ;
} else if (window.webkitURL!=undefined) { // webkit or chrome
url = window.webkitURL.createObjectURL(file) ;
}
return url ;
}

/*
function dataURLtoBlob(dataurl) {
    var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],
        bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);
    while(n--){
        u8arr[n] = bstr.charCodeAt(n);
    }
    return new Blob([u8arr], {type:mime});
}
*/

function saveFile()
{
    var img=document.getElementById("preview_avatar");
    imgWidth=img.naturalWidth;
    var can=document.getElementById("avatar_canvas");
        //var btn=document.getElementById("btn");
        //var returnImg=document.getElementById("returnImg");
    var ctx=can.getContext("2d");
    var newX=($('#chooseBox').position().left-$('#preview_avatar').position().left)*(img.naturalWidth/300);
    var newY=($('#chooseBox').position().top-$('#preview_avatar').position().top)*(img.naturalHeight/300);
    var newWidth=newHeight=(200+($("#adjust_choosebox").val()-50)*2)*(img.naturalWidth/300);
    var newHeight=(200+($("#adjust_choosebox").val()-50)*2)*(img.naturalHeight/300);
    //console.log(img.naturalWidth);
    //console.log(img.naturalHeight);
    //console.log(newX,newY);
    //ctx.drawImage(img,newX,newY,200*3.45,200*2.6,0,0,200,200);
    ctx.drawImage(img,newX,newY,newWidth,newHeight,0,0,200,200);
    //var data=can.toDataURL("image/jpeg");
    //var blob = dataURLtoBlob(data);
    //console.log(blob);
    can.toBlob(function(blobUrl){
        console.log(blobUrl);
        fileUpload(blobUrl);
    },"image/jpeg");   
}
//   上传附件到方法
function fileUpload(file_info) {
var form_data = new FormData();
//var file_info = $('#id_avatar_input')[0].files[0];
form_data.append('imgfile',file_info,"image.jpg");
//if(file_info==undefined)暂且不许要判断是否有附件
//alert('你没有选择任何文件');
//return false
//}

// 提交ajax的请求
$.ajax({
url:"/ajax/upload/avatar/",
type:'POST',
data: form_data,
processData: false,  // tell jquery not to process the data
contentType: false, // tell jquery not to set contentType
success: function(ret) {
$("#upAvatarModal").modal('hide');
$("#id_avatar").attr("src",ret);
$("#id_avatar").attr("srcset",ret);
console.log("success");
}
}); // end ajax
}

function initElement()
{
	$("#MenuPopover").attr({"src":user_avatar,"srcset":user_avatar});
	$(".ProfileHeader-name").text(er_name);
}

function initData()
{
	var str_main_data=$("main").attr("data-dfs-main");
	//console.log(str_main_data);
	var main_data=JSON.parse(str_main_data);//str_main_data.parseJSON();
	//console.log(main_data.user_name);
	var str_ext_data=$("main").attr("data-dfs-ext");
	//console.log(str_ext_data);
	var ext_data=JSON.parse(str_ext_data);
	//console.log(ext_data.questions_num);
	
	user_id=main_data.user_id;
	user_name=main_data.user_name;
	user_avatar=main_data.user_avatar;
	
	er_id=main_data.er_id;
    er_name=main_data.er_name;
    er_avatar=main_data.er_avatar;
    er_mood=main_data.er_mood;
    who=main_data.who;
	followed=main_data.followed;
	command=main_data.command;
    subcmd=main_data.subcmd;
	
	questions_num=ext_data.questions_num;
	answers_num=ext_data.answers_num;
	followtos_num=ext_data.followtos_num;
	followers_num=ext_data.followers_num;
	followtopics_num=ext_data.followtopics_num;
	followquestions_num=ext_data.followquestions_num;
}
function init()
{
    checkAvatar();
	initData();
	initElement();
    who_han="他";
    if ("me"==who)
        who_han="我";
    else if("she"==who)
        who_han="她";
    else if("he"==who)
        who_han="他";
    
    $(".Tabs-link").removeClass("is-active");
    $(".Tabs-link").each(function(){
        //console.log($(this).attr("href")); 
        if($(this).attr("href"))
        {
            //console.log($(this).attr("href").indexOf(command))
            if($(this).attr("href").indexOf(command)>-1)
                $(this).addClass("is-active");
        }
    });
    if ("answers"==command)
        appendAnswerElement();
    else if("asks"==command)
        appendQuestionElement();
    else if("following"==command)
        appendFollowElement(subcmd);
    else 
        console.log("false");
        
    appendLetterModal();
    setLetterReceiver(er_id,er_name);    
    checkSets();
}
</script>
</head>

<body class="Entry-body">
<header  role="banner" class="123Sticky AppHeader">
<div class="AppHeader-inner">

<div class="container">
<div class="row">
<div class="col-md-1">
<a href="/" aria-label="大大大">
<svg viewBox="0 0 200 91" class="Icon Icon--logo" width="64" height="30" aria-hidden="true" style="fill: rgb(15, 136, 235); height: 30px; width: 64px;">
<title></title><g><path d="M53.29 80.035l7.32.002 2.41 8.24 13.128-8.24h15.477v-67.98H53.29v67.978zm7.79-60.598h22.756v53.22h-8.73l-8.718 5.473-1.587-5.46-3.72-.012v-53.22zM46.818 43.162h-16.35c.545-8.467.687-16.12.687-22.955h15.987s.615-7.05-2.68-6.97H16.807c1.09-4.1 2.46-8.332 4.1-12.708 0 0-7.523 0-10.085 6.74-1.06 2.78-4.128 13.48-9.592 24.41 1.84-.2 7.927-.37 11.512-6.94.66-1.84.785-2.08 1.605-4.54h9.02c0 3.28-.374 20.9-.526 22.95H6.51c-3.67 0-4.863 7.38-4.863 7.38H22.14C20.765 66.11 13.385 79.24 0 89.62c6.403 1.828 12.784-.29 15.937-3.094 0 0 7.182-6.53 11.12-21.64L43.92 85.18s2.473-8.402-.388-12.496c-2.37-2.788-8.768-10.33-11.496-13.064l-4.57 3.627c1.363-4.368 2.183-8.61 2.46-12.71H49.19s-.027-7.38-2.372-7.38zm128.752-.502c6.51-8.013 14.054-18.302 14.054-18.302s-5.827-4.625-8.556-1.27c-1.874 2.548-11.51 15.063-11.51 15.063l6.012 4.51zm-46.903-18.462c-2.814-2.577-8.096.667-8.096.667s12.35 17.2 12.85 17.953l6.08-4.29s-8.02-11.752-10.83-14.33zM199.99 46.5c-6.18 0-40.908.292-40.953.292v-31.56c1.503 0 3.882-.124 7.14-.376 12.773-.753 21.914-1.25 27.427-1.504 0 0 3.817-8.496-.185-10.45-.96-.37-7.24 1.43-7.24 1.43s-51.63 5.153-72.61 5.64c.5 2.756 2.38 5.336 4.93 6.11 4.16 1.087 7.09.53 15.36.277 7.76-.5 13.65-.76 17.66-.76v31.19h-41.71s.88 6.97 7.97 7.14h33.73v22.16c0 4.364-3.498 6.87-7.65 6.6-4.4.034-8.15-.36-13.027-.566.623 1.24 1.977 4.496 6.035 6.824 3.087 1.502 5.054 2.053 8.13 2.053 9.237 0 14.27-5.4 14.027-14.16V53.93h38.235c3.026 0 2.72-7.432 2.72-7.432z" fill-rule="evenodd"></path></g>
</svg>
</a>
</div>
<nav role="navigation" class="col-md-3">
<a class="AppHeader-navItem" href="/">首页</a>
<a class="AppHeader-navItem" href="/trade">买卖</a>
<a class="AppHeader-navItem" href="/topic">话题</a>
</nav>


<div class="SearchBar col-md-6" role="search">
<div class="SearchBar-toolWrapper">
<form class="SearchBar-tool">
<div>
<div class="1Popover">
<div class="SearchBar-input Input-wrapper Input-wrapper--grey">
<input type="text" maxlength="120" value="" autocomplete="off" role="combobox" aria-expanded="false" aria-autocomplete="list" aria-activedescendant="AutoComplet-41236-89421--1" id="Popover-41236-42847-toggle" aria-haspopup="true" aria-owns="Popover-41236-42847-content" class="Input" placeholder="搜索你感兴趣的内容…">
<div class="Input-after">
<button class="Button SearchBar-searchIcon Button--primary" aria-label="搜索" type="button" data-reactid="25"><svg viewBox="0 0 16 16" class="Icon Icon--search" style="height:16px;width:16px;" width="16" height="16" aria-hidden="true" data-reactid="26"><title data-reactid="27"></title><g data-reactid="28"><path d="M12.054 10.864c.887-1.14 1.42-2.57 1.42-4.127C13.474 3.017 10.457 0 6.737 0S0 3.016 0 6.737c0 3.72 3.016 6.737 6.737 6.737 1.556 0 2.985-.533 4.127-1.42l3.103 3.104c.765.46 1.705-.37 1.19-1.19l-3.103-3.104zm-5.317.925c-2.786 0-5.053-2.267-5.053-5.053S3.95 1.684 6.737 1.684 11.79 3.95 11.79 6.737 9.522 11.79 6.736 11.79z"></path></g></svg>
</button>
</div>
</div>
</div>
</div>
</form>
</div>
<button class="1Button QuestionAskButton SearchBar-askButton 1Button--primary 1Button--green btn btn-success" type="button" data-toggle="modal" data-target="#askModal">提问</button>
</div>


<div class="AppHeader-userInfo col-md-2">
<div class="1Popover PushNotifications AppHeader-notifications">
<button class="1Button PushNotifications-icon 1Button--plain" type="button" id="NotificationPopover" data-toggle="popover" data-placement="bottom" data-trigger="manual" data-content="null" data-html="true" data-container="body">
<svg viewBox="0 0 20 22" class="Icon Icon--news" width="20" height="20" aria-hidden="true" style="height: 20px; width: 20px;"><title></title><g><path d="M2.502 14.08C3.1 10.64 2 3 8.202 1.62 8.307.697 9.08 0 10 0s1.694.697 1.797 1.62C18 3 16.903 10.64 17.497 14.076c.106 1.102.736 1.855 1.7 2.108.527.142.868.66.793 1.206-.075.546-.542.95-1.09.943H1.1C.55 18.34.084 17.936.01 17.39c-.075-.547.266-1.064.794-1.206.963-.253 1.698-1.137 1.698-2.104zM10 22c-1.417.003-2.602-1.086-2.73-2.51-.004-.062.02-.124.063-.17.043-.045.104-.07.166-.07h5c.063 0 .124.025.167.07.044.046.067.108.063.17-.128 1.424-1.313 2.513-2.73 2.51z"></path></g>
</svg>
</button>
</div>

<div class="1Popover Messages AppHeader-messages">
<button class="1Button Messages-icon 1Button--plain" id="MessagePopover" type="button" data-toggle="popover" data-placement="bottom" data-trigger="manual" data-content="null" data-html="true" data-container="body">
<svg viewBox="0 0 20 20" class="Icon Icon--message" width="20" height="20" aria-hidden="true" style="height: 20px; width: 20px;"><title></title><g><path d="M9 0C3.394 0 0 4.13 0 8c0 1.654.522 3.763 2.014 5.566.314.292.518.82.454 1.17-.165 1.488-.842 1.905-.842 1.905-.328.332.105.67.588.582 1.112-.2 2.07-.58 3.526-1.122.4-.202.464-.147.78-.078C11.524 17.764 18 14 18 8c0-3.665-3.43-8-9-8z"></path><path d="M19.14 9.628c.758.988.86 2.01.86 3.15 0 1.195-.62 3.11-1.368 3.938-.21.23-.354.467-.308.722.12 1.073.614 1.5.614 1.5.237.24-.188.563-.537.5-.802-.145-1.494-.42-2.545-.81-.29-.146-.336-.106-.563-.057-2.043.712-4.398.476-6.083-.926 5.964-.524 8.726-3.03 9.93-8.016z"></path></g>
</svg>
</button>
</div>

<div class="AppHeader-profile">
<div class="1Popover AppHeader-menu">
<img class="Avatar AppHeader-profileAvatar" id="MenuPopover" data-toggle="popover" data-placement="bottom" data-trigger="manual" data-content="null" data-html="true" data-container="body" width="30" height="30" src="/media/avatar/default.jpg" srcset="/media/avatar/default.jpg">
</div>
</div>

</div>

</div>
</div>
</div>
</header>

</div>
<main role="main" class="App-main" data-dfs-main='{ "user_id":"{{user.id}}","user_name":"{{user.first_name}}","user_avatar":"{{user.userprofile.avatar}}","er_id":"{{er.id}}","er_name":"{{er.first_name}}"
,"who":"{{who}}","followed":"{{followed}}","command":"{{command}}","subcmd":"{{subcmd}}"}'   data-dfs-ext='{"questions_num":"{{ext_info.questions_num}}","answers_num":"{{ext_info.answers_num}}"
,"followtos_num":"{{ext_info.followtos_num}}","followers_num":"{{ext_info.followers_num}}","followtopics_num":"{{ext_info.followtopics_num}}","followquestions_num":"{{ext_info.followquestions_num}}"}'>
<div>
<div>
<div id="ProfileHeader" class="ProfileHeader">
<div class="Card">

<div class="ProfileHeader-userCover">
<div class="UserCoverEditor">
<div>
<div class="UserCover UserCover--colorBlock">
</div>
</div>
<input type="file" accept="image/png,image/jpeg" style="display: none;">
</div>
</div>

<div class="ProfileHeader-wrapper">
<div class="ProfileHeader-main">

<div class="UserAvatarEditor ProfileHeader-avatar" style="top: -74px;">
<div class="UserAvatar">
<img id="1id_avatar" class="Avatar Avatar--large UserAvatar-inner" width="160" height="160" src="{{ er.userprofile.avatar }}" srcset="{{ user.userprofile.avatar }}">
</div>
<div class="Mask UserAvatarEditor-mask Mask-hidden">
<div class="Mask-mask Mask-mask--black UserAvatarEditor-maskInner">
</div>
<div class="Mask-content">
<svg class="Zi Zi--Camera UserAvatarEditor-cameraIcon" fill="currentColor" viewBox="0 0 24 24" width="36" height="36"><path d="M20.094 6S22 6 22 8v10.017S22 20 19 20H4.036S2 20 2 18V7.967S2 6 4 6h3s1-2 2-2h6c1 0 2 2 2 2h3.094zM12 16a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7zm0 1.5a5 5 0 1 0-.001-10.001A5 5 0 0 0 12 17.5zm7.5-8a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" fill-rule="evenodd"></path></svg>
<div class="UserAvatarEditor-maskInnerText">修改我的头像</div>
</div>
</div>
<input id="1id_avatar_input" name="file" type="file" accept="image/png,image/jpeg" style="display: none;"/>
</div>

<div class="ProfileHeader-content">
<div class="ProfileHeader-contentHead">
<h1 class="ProfileHeader-title">
<span class="ProfileHeader-name"></span>
<span class="RichText ProfileHeader-headline">{{er.userprofile.mood}}</span>
</h1>
</div>
<div class="ProfileHeader-contentBody" style="overflow: hidden; transition: height 300ms ease-out; height: 50px;">
<div>
<div class="ProfileHeader-info">
<div class="ProfileHeader-infoItem"><div class="ProfileHeader-iconWrapper"><svg viewBox="0 0 20 18" class="Icon Icon--company" width="13" height="16" aria-hidden="true" style="height: 16px; width: 13px;"><title></title><g><path d="M15 3.998v-2C14.86.89 13.98 0 13 0H7C5.822 0 5.016.89 5 2v2l-3.02-.002c-1.098 0-1.97.89-1.97 2L0 16c0 1.11.882 2 1.98 2h16.033c1.1 0 1.98-.89 1.987-2V6c-.007-1.113-.884-2.002-1.982-2.002H15zM7 4V2.5s-.004-.5.5-.5h5c.5 0 .5.5.5.5V4H7z"></path></g></svg></div>高新科技</div>
<div class="ProfileHeader-infoItem"><div class="ProfileHeader-iconWrapper"><svg width="14" height="16" viewBox="0 0 14 14" class="Icon Icon--male" aria-hidden="true" style="height: 16px; width: 14px;"><title></title><g><path d="M3.025 10.64c-1.367-1.366-1.367-3.582 0-4.95 1.367-1.366 3.583-1.366 4.95 0 1.367 1.368 1.367 3.584 0 4.95-1.367 1.368-3.583 1.368-4.95 0zm10.122-9.368c-.002-.414-.34-.75-.753-.753L8.322 0c-.413-.002-.746.33-.744.744.002.413.338.75.75.752l2.128.313c-.95.953-1.832 1.828-1.832 1.828-2.14-1.482-5.104-1.27-7.013.64-2.147 2.147-2.147 5.63 0 7.777 2.15 2.148 5.63 2.148 7.78 0 1.908-1.91 2.12-4.873.636-7.016l1.842-1.82.303 2.116c.003.414.34.75.753.753.413.002.746-.332.744-.745l-.52-4.073z" fill-rule="evenodd"></path></g></svg></div></div>
</div>
</div>
</div>
<div class="ProfileHeader-contentFooter">

{% ifnotequal user.id er.id %}
<button class="Button ProfileHeader-expandButton Button--plain" type="button"><svg viewBox="0 0 10 6" class="Icon ProfileHeader-arrowIcon Icon--arrow" width="10" height="16" aria-hidden="true" style="height: 16px; width: 10px;"><title></title><g><path d="M8.716.217L5.002 4 1.285.218C.99-.072.514-.072.22.218c-.294.29-.294.76 0 1.052l4.25 4.512c.292.29.77.29 1.063 0L9.78 1.27c.293-.29.293-.76 0-1.052-.295-.29-.77-.29-1.063 0z"></path></g></svg>查看详细资料</button>
<div class="MemberButtonGroup ProfileButtonGroup ProfileHeader-buttons">
{% ifequal followed "true" %}
    <button class="Button FollowButton Button--primary Button--grey" type="button" data-er-id="{{er.id}}" data-follow-type="people" data-followed="true" data-who="{{who}}">已关注</button>
{% else %}
    {% ifequal who "she" %}
    <button class="Button FollowButton Button--primary Button--blue" type="button" data-er-id="{{er.id}}" data-follow-type="people" data-followed="false" data-who="{{who}}">关注她</button>
    {% else %}
    <button class="Button FollowButton Button--primary Button--blue" type="button" data-er-id="{{er.id}}" data-follow-type="people" data-followed="false" data-who="{{who}}">关注他</button>
    {% endifequal %}
{% endifequal %}
<button class="Button Button--grey Button--withIcon Button--withLabel" type="button" data-toggle="modal" data-target="#letterModal"><span style="display: inline-flex; align-items: center;">&#8203;<svg class="Zi Zi--Comments Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M11 2c5.571 0 9 4.335 9 8 0 6-6.475 9.764-11.481 8.022-.315-.07-.379-.124-.78.078-1.455.54-2.413.921-3.525 1.122-.483.087-.916-.25-.588-.581 0 0 .677-.417.842-1.904.064-.351-.14-.879-.454-1.171A8.833 8.833 0 0 1 2 10c0-3.87 3.394-8 9-8zm10.14 9.628c.758.988.86 2.009.86 3.15 0 1.195-.619 3.11-1.368 3.938-.209.23-.354.467-.308.722.12 1.073.614 1.501.614 1.501.237.239-.188.562-.537.5-.803-.146-1.495-.42-2.546-.811-.29-.146-.336-.106-.563-.057-2.043.711-4.398.475-6.083-.927 5.965-.524 8.727-3.03 9.93-8.016z" fill-rule="evenodd"></path></svg></span>发私信</button>
</div>
{% else %}
<button class="Button ProfileHeader-expandButton Button--plain" type="button"><svg viewBox="0 0 10 6" class="Icon ProfileHeader-arrowIcon Icon--arrow" width="10" height="16" aria-hidden="true" style="height: 16px; width: 10px;"><title></title><g><path d="M8.716.217L5.002 4 1.285.218C.99-.072.514-.072.22.218c-.294.29-.294.76 0 1.052l4.25 4.512c.292.29.77.29 1.063 0L9.78 1.27c.293-.29.293-.76 0-1.052-.295-.29-.77-.29-1.063 0z"></path></g></svg>查看详细资料</button>
<div class="ProfileButtonGroup ProfileHeader-buttons"><button class="Button Button--blue" type="button" onclick="profileEdit()">编辑个人资料</button></div>
{% endifnotequal %}

</div>
</div>
</div>
</div>
</div>
</div>
<div class="Profile-main">
<div class="Profile-mainColumn">
<div class="Card ProfileMain" id="ProfileMain">
<div class="ProfileMain-header"  data-who="{{who}}" data-command="{{command}}" data-subcmd="{{subcmd}}" data-er-id="{{er.id}}" data-er-name="{{er.first_name}}" data-er-avatar="{{er.userprofile.avatar}}" data-er-mood="{{er.userprofile.mood}}">
<ul role="tablist" class="Tabs ProfileMain-tabs">
<!--
<li role="tab" class="Tabs-item Tabs-item--noMeta" aria-controls="Profile-activities">
<a class="Tabs-link" href="/er/{{er.id}}/activities/">动态</a>
</li>
-->
<li role="tab" class="Tabs-item" aria-controls="Profile-answers">
<a class="Tabs-link" href="/er/{{er.id}}/answers/">回答<span class="Tabs-meta">{{ext_info.answers_num}}</span></a>
</li>
<li role="tab" class="Tabs-item" aria-controls="Profile-asks">
<a class="Tabs-link" href="/er/{{er.id}}/asks/">提问<span class="Tabs-meta">{{ext_info.questions_num}}</span></a>
</li>
<li role="tab" class="Tabs-item" aria-controls="Profile-posts">
<a class="Tabs-link" href="/er/{{er.id}}/posts/">文章<span class="Tabs-meta">0</span></a>
</li>
<!--
<li role="tab" class="Tabs-item" aria-controls="Profile-columns">
<a class="Tabs-link" href="/er/{{er.id}}/columns/">专栏<span class="Tabs-meta">0</span></a>
</li>
<li role="tab" class="Tabs-item" aria-controls="Profile-pins">
<a class="Tabs-link" href="/er/{{er.id}}/pins/">想法<span class="Tabs-meta">0</span></a>
</li>
<li role="tab" class="Tabs-item" aria-controls="Profile-collections">
<a class="Tabs-link" href="/er/{{er.id}}/collections/">收藏<span class="Tabs-meta">0</span></a>
</li>
-->
<li role="tab" class="Tabs-item" aria-controls="Profile-following">
<a class="Tabs-link" href="/er/{{er.id}}/following/">关注<span class="Tabs-meta"><svg viewBox="0 0 10 6" class="Icon ProfileMain-tabIcon Icon--arrow" width="10" height="16" aria-hidden="true" style="height: 16px; width: 10px;"><title></title><g><path d="M8.716.217L5.002 4 1.285.218C.99-.072.514-.072.22.218c-.294.29-.294.76 0 1.052l4.25 4.512c.292.29.77.29 1.063 0L9.78 1.27c.293-.29.293-.76 0-1.052-.295-.29-.77-.29-1.063 0z"></path></g></svg></span></a>
</li>

<!--
<li role="tab" class="Tabs-item Tabs-item--noMeta">
<div class="Popover Tabs-link">
<button class="Button ProfileMain-menuToggler Button--plain" type="button" id="Popover-20486-79514-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="Popover-20486-79514-content">更多<svg viewBox="0 0 10 6" class="Icon ProfileMain-tabIcon Icon--arrow" width="10" height="16" aria-hidden="true" style="height: 16px; width: 10px;"><title></title><g><path d="M8.716.217L5.002 4 1.285.218C.99-.072.514-.072.22.218c-.294.29-.294.76 0 1.052l4.25 4.512c.292.29.77.29 1.063 0L9.78 1.27c.293-.29.293-.76 0-1.052-.295-.29-.77-.29-1.063 0z"></path></g></svg></button>
</div>
</li>
-->

</ul>
</div>

<div>
<div>
<div class="Sticky">
</div>
</div>
</div>


</div>
</div>

<div class="Profile-sideColumn" data-za-module="RightSideBar">
<div class="Card FollowshipCard">
<div class="NumberBoard FollowshipCard-counts NumberBoard--divider">
<a class="Button NumberBoard-item Button--plain" type="button" href="/er/{{er.id}}/following/followtos"><div class="NumberBoard-itemInner"><div class="NumberBoard-itemName">关注了</div><strong class="NumberBoard-itemValue" title="{{ext_info.followtos_num}}">{{ext_info.followtos_num}}</strong></div></a>
<a class="Button NumberBoard-item Button--plain" type="button" href="/er/{{er.id}}/following/followers"><div class="NumberBoard-itemInner"><div class="NumberBoard-itemName">关注者</div><strong class="NumberBoard-itemValue" title="{{ext_info.followers_num}}">{{ext_info.followers_num}}</strong></div></a>
</div>
</div>
<div class="Profile-lightList">
<a class="Profile-lightItem" href="/er/{{er.id}}/following/topics"><span class="Profile-lightItemName">关注的话题</span><span class="Profile-lightItemValue">{{ext_info.followtopics_num}}</span></a>
<!--<a class="Profile-lightItem" href="/er/{{er.id}}/following/columns"><span class="Profile-lightItemName">关注的专栏</span><span class="Profile-lightItemValue">0</span></a>-->
<a class="Profile-lightItem" href="/er/{{er.id}}/following/questions"><span class="Profile-lightItemName">关注的问题</span><span class="Profile-lightItemValue">{{ext_info.followquestions_num}}</span></a>
<!--<a class="Profile-lightItem" href="/er/{{er.id}}/following/collections"><span class="Profile-lightItemName">关注的收藏夹</span><span class="Profile-lightItemValue">0</span></a>-->
</div>
<div class="Profile-footerOperations">个人主页被浏览 2 次</div>
<footer class="Footer">
<!--<a class="Footer-item" target="_blank" href="//liukanshan.zhihu.com/">刘看山</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" href="/question/19581624">知乎指南</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" href="/terms">知乎协议</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" href="/app">应用</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" href="/careers">工作</a><br>-->
<!--<a class="Footer-item" target="_blank" href="https://zhuanlan.zhihu.com/p/28561671">侵权举报</a><span class="Footer-dot">-->
</span><a class="Footer-item" target="_blank" href="http://www.12377.cn">网上有害信息举报专区</a><br><span class="Footer-item">违法和不良信息举报：010-82716601</span><br><!--<a class="Footer-item" target="_blank" href="/jubao">儿童色情信息举报专区</a><br>--><a class="Footer-item" target="_blank" href="/">联系我们</a><span> © 2018 大大大</span>
</footer>
</div>
</div>
</div>
</div>
</main>


<div class="CornerButtons">
<div class="CornerAnimayedFlex">
<button class="Button CornerButton Button--plain" data-tooltip="建议反馈" data-tooltip-position="left" aria-label="建议反馈" type="button"><svg class="Zi Zi--Feedback" title="建议反馈" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M19.99 6.99L18 5s-1-1-2-1H8C7 4 6 5 6 5L4 7S3 8 3 9v9s0 2 2.002 2H19c2 0 2-2 2-2V9c0-1-1.01-2.01-1.01-2.01zM16.5 5.5L19 8H5l2.5-2.5h9zm-2 5.5s.5 0 .5.5-.5.5-.5.5h-5s-.5 0-.5-.5.5-.5.5-.5h5z"></path></svg></button>
</div>
<div class="CornerAnimayedFlex CornerAnimayedFlex--hidden">
<button class="Button CornerButton Button--plain" data-tooltip="回到顶部" data-tooltip-position="left" aria-label="回到顶部" type="button"><svg class="Zi Zi--BackToTop" title="回到顶部" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M16.036 19.59a1 1 0 0 1-.997.995H9.032a.996.996 0 0 1-.997-.996v-7.005H5.03c-1.1 0-1.36-.633-.578-1.416L11.33 4.29a1.003 1.003 0 0 1 1.412 0l6.878 6.88c.782.78.523 1.415-.58 1.415h-3.004v7.005z"></path></svg></button>
</div>
</div>
</div>
</div>
<div>
<div data-reactroot="" style="display: none;">想来知乎工作？请发送邮件到 jobs@zhihu.com</div>
</div>
<span><div></div></span>

<!--
<div class="Modal-wrapper">
<div class="Modal-backdrop">
</div>
-->
<div id="upAvatarModal" class="modal fade 1Modal 1Modal--default 1UploadImageModal-modal" tabindex="-1" role="dialog" 1aria-labelledby="upAvatarModalLabel" 1aria-hidden="true">
<div class="modal-dialog" style="#width:200px;">

<div class="Modal-inner">
<h3 class="Modal-title">编辑头像</h3>
<div class="Modal-subtitle">调整头像尺寸和位置</div>
<div class="Modal-content">
<div>
<div class="UploadImageModal-container">
<div style="text-align:center">
<img id="preview_avatar" width="300px" height="300px" alt="" >
</div>
<div  id="chooseBox" style="width: 200px;height: 200px;border: 1px solid #4fb8e3;position: absolute;left: 200px;top: 163px;z-index: 1000"></div>
<canvas id="avatar_canvas" width="200" height="200" style="width: 200px; height: 200px;display:none"></canvas>
</div>
<div style="text-align:center">
<svg class="Zi Zi--Size" fill="currentColor" viewBox="0 0 24 24" width="18" height="18"><path d="M16.296 7h.697A1.01 1.01 0 0 1 18 8.003v10.995c0 .554-.45 1.003-1.007 1.003H4.007A1.01 1.01 0 0 1 3 18.998V8.003C3 7.449 3.45 7 4.007 7h12.289zm-.892 11a.6.6 0 0 0 .597-.601V9.601A.597.597 0 0 0 15.405 9H5.596A.599.599 0 0 0 5 9.602v7.797c0 .335.267.601.596.601h9.808zM7 4h13a1 1 0 0 1 1 1v11a1 1 0 0 1-2 0V6.5c0-.5-.5-.5-.5-.5H7a1 1 0 0 1 0-2z" fill-rule="evenodd"></path></svg>
<input id="adjust_choosebox"type="range" step="1" min="0" max="100" class="RangeInput" value="50" style="display:inline" oninput="adjustChooseBox()">
<svg class="Zi Zi--Size" fill="currentColor" viewBox="0 0 24 24" width="22" height="22"><path d="M16.296 7h.697A1.01 1.01 0 0 1 18 8.003v10.995c0 .554-.45 1.003-1.007 1.003H4.007A1.01 1.01 0 0 1 3 18.998V8.003C3 7.449 3.45 7 4.007 7h12.289zm-.892 11a.6.6 0 0 0 .597-.601V9.601A.597.597 0 0 0 15.405 9H5.596A.599.599 0 0 0 5 9.602v7.797c0 .335.267.601.596.601h9.808zM7 4h13a1 1 0 0 1 1 1v11a1 1 0 0 1-2 0V6.5c0-.5-.5-.5-.5-.5H7a1 1 0 0 1 0-2z" fill-rule="evenodd"></path></svg>
</div>
<div class="ModalButtonGroup ModalButtonGroup--vertical">
<button class="Button Button--primary Button--blue" type="button" onclick="saveFile()">保存</button>
</div>
</div>
</div>
</div>
<button data-dismiss="modal" class="Button Modal-closeButton Button--plain" aria-label="关闭" type="button">
<svg class="Zi Zi--Close Modal-closeIcon" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M13.486 12l5.208-5.207a1.048 1.048 0 0 0-.006-1.483 1.046 1.046 0 0 0-1.482-.005L12 10.514 6.793 5.305a1.048 1.048 0 0 0-1.483.005 1.046 1.046 0 0 0-.005 1.483L10.514 12l-5.208 5.207a1.048 1.048 0 0 0 .006 1.483 1.046 1.046 0 0 0 1.482.005L12 13.486l5.207 5.208a1.048 1.048 0 0 0 1.483-.006 1.046 1.046 0 0 0 .005-1.482L13.486 12z" fill-rule="evenodd"></path></svg>
</button>
</div>
</div>
<!--</div>-->

<!-- 提问（Modal） -->
<div class="modal fade" id="askModal" tabindex="-1" role="dialog" aria-labelledby="askModalLabel" aria-hidden="true">
	<div class="modal-dialog askmodal">
        <div class="Modal-inner">
            <h3 class="Modal-title" id="askModalLabel">写下你的问题</h3>
            <div class="Modal-subtitle">描述精确的问题更易得到解答</div>
                <div class="Modal-content">
                    <div class="QuestionAsk">
                        <form method="post" action="/question/" id="form_ask">
                        {% csrf_token %}            
                            <div class="QuestionAsk-section">
                                <div class="QuestionAsk-title">
                                        <div class="Input-wrapper Input-wrapper--spread Input-wrapper--multiline Input-wrapper--large">
                                        <textarea required="" name="title" rows="2" autocomplete="off" role="combobox" aria-expanded="false" aria-autocomplete="list" aria-activedescendant="AutoComplet-64372-3800-0" id="Popover-64372-42711-toggle" aria-haspopup="true" aria-owns="Popover-64372-42711-content" class="Input" placeholder="问题标题"></textarea>
                                        </div>
                                </div>
                            </div>
            
                            <div class="QuestionAsk-section">
                                <div class="TagInput TagInput--empty">
                                            <select id="topics_select" name="topics_selected" class="selectpicker show-menu-arrow form-control" multiple data-live-search="true" data-max-options="5" data-style="Input-wrapper Input-wrapper--spread Input-wrapper--large" title="添加话题">
                                            </select>
                                </div>
                            </div>

                            <input id="hide_for_submit" type="hidden" name="topics" value="null123">
                
                            <div class="QuestionAsk-section QuestionAsk-DetailSection">问题描述（可选）:<textarea id="summernote_question" name="detail" 1rows="5" 1cols="70" 1maxlength="160"></textarea>              
                            </div>
                           
                            <div class="ModalButtonGroup QuestionAsk-buttonGroup ModalButtonGroup--vertical">
                                <button class="1Button 1Button--primary 1Button--green btn btn-success" type="submit" form="form_ask">提交问题</button>
                            </div>
                        </form>
                    </div>
                </div>
		</div>        
        <button data-dismiss="modal" aria-hidden="true" class="Button Modal-closeButton Button--plain close" aria-label="关闭" type="button">
        <svg class="Zi Zi--Close Modal-closeIcon" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M13.486 12l5.208-5.207a1.048 1.048 0 0 0-.006-1.483 1.046 1.046 0 0 0-1.482-.005L12 10.514 6.793 5.305a1.048 1.048 0 0 0-1.483.005 1.046 1.046 0 0 0-.005 1.483L10.514 12l-5.208 5.207a1.048 1.048 0 0 0 .006 1.483 1.046 1.046 0 0 0 1.482.005L12 13.486l5.207 5.208a1.048 1.048 0 0 0 1.483-.006 1.046 1.046 0 0 0 .005-1.482L13.486 12z" fill-rule="evenodd"></path></svg></button>        
	</div>
</div>
<!--- div other--->
</body>
</html>