<!DOCTYPE html>
<html lang="zh" data-hairline="true" data-theme="light">
<head>
{%load static %}
<meta http-equiv="X-UA-Compatible" content="IE=11">
<meta charset="utf-8">
<title>首页 - 大大大</title>
<link rel="stylesheet" href="{% static 'common/bootstrap-3.3.7/css/bootstrap.css' %}">
<link rel="stylesheet" href="{% static 'common/bootstrap-select-1.12.4/css/bootstrap-select.css' %}">
<link rel="stylesheet" href="{% static 'common/summernote-0.8.8/summernote.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'common/z_main.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'common/main.css' %}">
    
<script src="{%static 'common/jquery.js' %}"></script>
<script src="{% static 'common/bootstrap-3.3.7/js/bootstrap.js' %}"></script>
<script src="{% static 'common/bootstrap-select-1.12.4/js/bootstrap-select.js' %}"></script>
<script src="{% static 'common/bootstrap-select-1.12.4/js/i18n/defaults-zh_CN.js' %}"></script>
<script src="{% static 'common/summernote-0.8.8/summernote.js' %}"></script>
<script src="{% static 'common/summernote-0.8.8/lang/summernote-zh-CN.js' %}"></script>
<script src="{% static 'common/main.js' %}"></script>
<script>
function setCookie(name,value,secs)
{
    var exp = new Date();
    exp.setTime(exp.getTime() + secs*1000);
    document.cookie = name + "="+ escape (value) + ";expires=" + exp.toGMTString();
}
function getCookie(name)
{
    var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");
    if(arr=document.cookie.match(reg))
        return (arr[2]);
    else
        return null;
}
function delCookie(name)
{
    var exp = new Date();
    exp.setTime(exp.getTime() - 1);
    var cval=getCookie(name);
    if(cval!=null)
        document.cookie= name + "="+cval+";expires="+exp.toGMTString();
}
function countDown()
{
    if(0==g_countdown_secs)
    {
        $(".SignFlow-smsInputButton").removeClass("is-counting").text("获取短信验证码");
        delCookie("countdown");
    }
    else
    {
        g_countdown_secs-=1;
        $("#counting-num").text(g_countdown_secs);
        setCookie("countdown",g_countdown_secs,g_countdown_secs);
        setTimeout("countDown()",1000);        
    }
}
function checkSmsSend()
{
    $(".SignFlow-smsInputButton").off("click");
    $(".SignFlow-smsInputButton").click(function(){
        var is_counting=$(this).hasClass("is-counting");
        if(is_counting)
        {
            console.log("counting,can`t click");
        }
        else
        {
            var value=$("input[name='regPhoneNo']").val();
            var reg = /^1[3|4|5|7|8][0-9]{9}$/;
            var is_phone_no=reg.test(value)
            if(is_phone_no)
            {
                g_countdown_secs=59;
                $(this).addClass("is-counting").empty().append('<span id="counting-num">59</span>秒后可重发');
                setTimeout("countDown()",1000);
                setCookie("countdown",g_countdown_secs,g_countdown_secs);
                $.post("/ajax/send_sms/",{"phone_no":value,"type":"register"},function(ret){
                    if("fail"!=ret)
                    {
                        if("registered"==ret)
                            $(".SignFlow-accountInputContainer>.SignFlowInput-errorMask").removeClass("SignFlowInput-errorMask--hidden").text("该手机号已注册");
                    }
                });
            }
            else
            {
                console.log("phone no error");
                $(".SignFlow-accountInputContainer>.SignFlowInput-errorMask").removeClass("SignFlowInput-errorMask--hidden").text("手机号格式错误");
            }
        }
        
    });
}
function checkErrorMask()
{
    $(".SignFlowInput-errorMask").click(function(){
        console.log("error mask click");
        $(this).addClass("SignFlowInput-errorMask--hidden");
        $(this).siblings(".Input-wrapper").children(".Input").val("").focus();
    });
}
function checkSwithPassword()
{
    $(".SignFlow-switchPassword").off("click");
    $(".SignFlow-switchPassword").click(function(){
        var input=$(this).parents(".SignFlow-password").find(".Input");
        if("password"==input.attr("type"))
        {
            input.attr("type","text");
            var password_icon='<svg width="24" height="20" viewBox="0 0 24 24" class="Icon SignFlow-switchPasswordIcon Icon--read" aria-hidden="true" style="vertical-align: middle; height: 20px; width: 24px;"><title></title><g><title>Read</title><path d="M1 11.5C1 15 7 19 12 19s11-4 11-7.5S17 4 12 4 1 8 1 11.5zm11 5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm-3-5c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z" fill-rule="evenodd"></path></g></svg>';
        }
        else
        {
            input.attr("type","password");
            var password_icon='<svg width="24" height="20" viewBox="0 0 24 24" class="Icon SignFlow-switchPasswordIcon Icon--inconspicuous" aria-hidden="true" style="vertical-align: middle; height: 20px; width: 24px;"><title></title><g><title>Inconspicuous</title><path d="M17.007 11.504c0 .65-.13 1.26-.36 1.83l3 3.073S23 14.136 23 11.504C23 8.008 17.255 4 11.995 4c-1.4 0-2.741.25-3.982.701l2.161 2.16c.57-.23 1.18-.36 1.831-.36a5.004 5.004 0 0 1 5.002 5.003zM2.57 4.342l2.067 2.075C3.499 7.258 1 9.119 1 11.504c0 3.336 5.79 7.503 11.005 7.503 1.55 0 3.031-.3 4.382-.84l.42.42 2.125 2.118s.782.571 1.314 0-.074-1.305-.074-1.305L3.955 3.183s-.76-.742-1.385-.19c-.626.554 0 1.35 0 1.35zm4.963 4.96l1.55 1.552c-.05.21-.08.43-.08.65 0 1.66 1.341 3.001 3.002 3.001.22 0 .44-.03.65-.08l1.551 1.551c-.67.33-1.41.53-2.2.53a5.004 5.004 0 0 1-5.003-5.002c0-.79.2-1.53.53-2.201zm4.312-.78l3.151 3.152.02-.16c0-1.66-1.34-3.001-3.001-3.001l-.17.01z" fill-rule="evenodd"></path></g></svg>';
        }
        $(this).empty().append(password_icon);
    });

}
function checkLoginType()
{
    $(".Login-switchType").off("click");
    $(".Login-switchType").click(function(){
        var button=$(this);
        if("sms"==button.attr("data-login-type"))
        {
            $(".Login-content.Login-type-password").removeClass("is-hide");
            $(".Login-content.Login-type-sms").addClass("is-hide");
        }
        else
        {
            $(".Login-content.Login-type-password").addClass("is-hide");
            $(".Login-content.Login-type-sms").removeClass("is-hide");
        }
    });
}
function switchRegisterLogin(e)
{
    var swith_element=$(".SignContainer-switch");
    if("login"==swith_element.attr("data-action"))
    {
        swith_element.attr("data-action","register").empty().append('已有帐号？<span onclick="switchRegisterLogin()">登录</span>');
        $(".SignFlowHeader-slogen").text("注册知乎，发现更大的世界");
        $(".Register").removeClass("is-hide");
        $(".Login-content.Login-type-password").addClass("is-hide");
        $(".Login-content.Login-type-sms").addClass("is-hide");
    }
    else
    {
        swith_element.attr("data-action","login").empty().append('没有帐号？<span onclick="switchRegisterLogin()">注册</span>');
        $(".SignFlowHeader-slogen").text("登录知乎，发现更大的世界");
        $(".Register").addClass("is-hide");
        $(".Login-content.Login-type-password").removeClass("is-hide");
        $(".Login-content.Login-type-sms").addClass("is-hide");
    }
}
function init()
{
    console.log("init");
    checkLoginType();
    checkSwithPassword();
    checkSmsSend();
    checkErrorMask();
    $(".Login-cannotLogin").click(function(){
        location.href="/account/?arg=password_reset";
    });
    var secs=getCookie("countdown");
    if(null!=secs)
    {
        g_countdown_secs=secs;
        $(".SignFlow-smsInputButton").addClass("is-counting").empty().append('<span id="counting-num">59</span>秒后可重发');
        setTimeout("countDown()",1000);
    }
}
</script>
</head>

<body class="EntrySign-body">
<div id="root">
<div>
<div class="LoadingBar"></div>

<main role="main" class="App-main">
<div class="SignFlowHomepage">
<div class="SignFlowHomepage-content">
<div class="Card SignContainer-content">
<div class="SignFlowHeader" style="padding-bottom:5px"><svg viewBox="0 0 200 91" class="Icon ZhihuLogo Icon--logo" style="height:65.625px;width:140px" width="140" height="65.625" aria-hidden="true"><title></title><g><path d="M53.29 80.035l7.32.002 2.41 8.24 13.128-8.24h15.477v-67.98H53.29v67.978zm7.79-60.598h22.756v53.22h-8.73l-8.718 5.473-1.587-5.46-3.72-.012v-53.22zM46.818 43.162h-16.35c.545-8.467.687-16.12.687-22.955h15.987s.615-7.05-2.68-6.97H16.807c1.09-4.1 2.46-8.332 4.1-12.708 0 0-7.523 0-10.085 6.74-1.06 2.78-4.128 13.48-9.592 24.41 1.84-.2 7.927-.37 11.512-6.94.66-1.84.785-2.08 1.605-4.54h9.02c0 3.28-.374 20.9-.526 22.95H6.51c-3.67 0-4.863 7.38-4.863 7.38H22.14C20.765 66.11 13.385 79.24 0 89.62c6.403 1.828 12.784-.29 15.937-3.094 0 0 7.182-6.53 11.12-21.64L43.92 85.18s2.473-8.402-.388-12.496c-2.37-2.788-8.768-10.33-11.496-13.064l-4.57 3.627c1.363-4.368 2.183-8.61 2.46-12.71H49.19s-.027-7.38-2.372-7.38zm128.752-.502c6.51-8.013 14.054-18.302 14.054-18.302s-5.827-4.625-8.556-1.27c-1.874 2.548-11.51 15.063-11.51 15.063l6.012 4.51zm-46.903-18.462c-2.814-2.577-8.096.667-8.096.667s12.35 17.2 12.85 17.953l6.08-4.29s-8.02-11.752-10.83-14.33zM199.99 46.5c-6.18 0-40.908.292-40.953.292v-31.56c1.503 0 3.882-.124 7.14-.376 12.773-.753 21.914-1.25 27.427-1.504 0 0 3.817-8.496-.185-10.45-.96-.37-7.24 1.43-7.24 1.43s-51.63 5.153-72.61 5.64c.5 2.756 2.38 5.336 4.93 6.11 4.16 1.087 7.09.53 15.36.277 7.76-.5 13.65-.76 17.66-.76v31.19h-41.71s.88 6.97 7.97 7.14h33.73v22.16c0 4.364-3.498 6.87-7.65 6.6-4.4.034-8.15-.36-13.027-.566.623 1.24 1.977 4.496 6.035 6.824 3.087 1.502 5.054 2.053 8.13 2.053 9.237 0 14.27-5.4 14.027-14.16V53.93h38.235c3.026 0 2.72-7.432 2.72-7.432z" fill-rule="evenodd"></path></g></svg>
<div class="SignFlowHeader-slogen">登录知乎，发现更大的世界</div>
</div>
<div class="SignContainer-inner">

<div class="Register is-hide">
<div>
<div class="Register-content">
<form novalidate="" class="SignFlow" action="" method="post" onsubmit="return checkRegisterValid()">
{% csrf_token %}
<div class="SignFlow-account">
<div class="SignFlowInput SignFlow-accountInputContainer">
<div class="SignFlow-accountInput Input-wrapper"><input type="tel" value="" name="regPhoneNo" class="Input" placeholder="手机号"></div>
<div class="SignFlowInput-errorMask SignFlowInput-requiredErrorMask SignFlowInput-errorMask--hidden"></div>
</div>
</div>

<div class="Register-SMSInput">
<div class="SignFlow SignFlow-smsInputContainer">
<div class="SignFlowInput SignFlow-smsInput">
<div class="Input-wrapper"><input type="number" value="" name="digits" class="Input" placeholder="输入 6 位短信验证码"></div>
<div class="SignFlowInput-errorMask SignFlowInput-requiredErrorMask SignFlowInput-errorMask--hidden"></div>
</div>
<button class="Button CountingDownButton SignFlow-smsInputButton Button--plain" type="button">获取短信验证码</button>
</div>
</div>

<div class="SignFlow-username">
<div class="SignFlowInput">
<div class="Input-wrapper"><input name="nickname" type="text" class="Input" placeholder="昵称" value=""></div>
<div class="SignFlowInput-errorMask SignFlowInput-requiredErrorMask SignFlowInput-errorMask--hidden"></div>
</div>
</div>

<div class="SignFlow-password">
<div class="SignFlowInput">
<div class="Input-wrapper"><input name="regPassword" type="text" class="Input" placeholder="密码(长度为6~18位，必须包含字母和数字)" value=""></div>
<div class="SignFlowInput-errorMask SignFlowInput-requiredErrorMask SignFlowInput-errorMask--hidden"></div>
</div>
<button class="Button SignFlow-switchPassword Button--plain" tabindex="-1" type="button"><svg width="24" height="20" viewBox="0 0 24 24" class="Icon SignFlow-switchPasswordIcon Icon--read" aria-hidden="true" style="vertical-align: middle; height: 20px; width: 24px;"><title></title><g><title>Read</title><path d="M1 11.5C1 15 7 19 12 19s11-4 11-7.5S17 4 12 4 1 8 1 11.5zm11 5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm-3-5c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z" fill-rule="evenodd"></path></g></svg></button>
</div>

<button class="Button Register-submitButton Button--primary Button--blue" type="submit">注册</button>
</form>
</div>
</div>
</div>


<div class="Login-content Login-type-password">
<form class="SignFlow" action="" method="post" onsubmit="return checkLoginValid()">
{% csrf_token %}
<div class="SignFlow-account">
<div class="SignFlow-supportedCountriesSelectContainer"></div>
<div class="SignFlowInput SignFlow-accountInputContainer">
<div class="SignFlow-accountInput Input-wrapper"><input name="loginPhoneNo" type="tel" class="Input" placeholder="手机号" value=""></div>
<div class="SignFlowInput-errorMask SignFlowInput-requiredErrorMask SignFlowInput-errorMask--hidden"></div>
</div>
</div>
<div class="SignFlow-password">
<div class="SignFlowInput">
<div class="Input-wrapper"><input name="loginPassword" type="password" class="Input" placeholder="密码" value=""></div>
<div class="SignFlowInput-errorMask SignFlowInput-requiredErrorMask SignFlowInput-errorMask--hidden"></div>
</div>
<button class="Button SignFlow-switchPassword Button--plain" tabindex="-1" type="button"><svg width="24" height="20" viewBox="0 0 24 24" class="Icon SignFlow-switchPasswordIcon Icon--inconspicuous" aria-hidden="true" style="vertical-align: middle; height: 20px; width: 24px;"><title></title><g><title>Inconspicuous</title><path d="M17.007 11.504c0 .65-.13 1.26-.36 1.83l3 3.073S23 14.136 23 11.504C23 8.008 17.255 4 11.995 4c-1.4 0-2.741.25-3.982.701l2.161 2.16c.57-.23 1.18-.36 1.831-.36a5.004 5.004 0 0 1 5.002 5.003zM2.57 4.342l2.067 2.075C3.499 7.258 1 9.119 1 11.504c0 3.336 5.79 7.503 11.005 7.503 1.55 0 3.031-.3 4.382-.84l.42.42 2.125 2.118s.782.571 1.314 0-.074-1.305-.074-1.305L3.955 3.183s-.76-.742-1.385-.19c-.626.554 0 1.35 0 1.35zm4.963 4.96l1.55 1.552c-.05.21-.08.43-.08.65 0 1.66 1.341 3.001 3.002 3.001.22 0 .44-.03.65-.08l1.551 1.551c-.67.33-1.41.53-2.2.53a5.004 5.004 0 0 1-5.003-5.002c0-.79.2-1.53.53-2.201zm4.312-.78l3.151 3.152.02-.16c0-1.66-1.34-3.001-3.001-3.001l-.17.01z" fill-rule="evenodd"></path></g></svg></button>
</div>
<div class="Login-options">
<!--<button class="Button Login-switchType Button--plain" type="button" data-login-type="password">手机验证码登录</button>-->
<button class="Button Login-switchType Button--plain" type="button" data-login-type="password"></button>
<button class="Button Login-cannotLogin Button--plain" type="button">忘记密码？</button>
</div>
<button class="Button SignFlow-submitButton Button--primary Button--blue" type="submit">登录</button>
</form>
</div>

<div class="SignContainer-switch" data-action="login">没有帐号？<span onclick="switchRegisterLogin(this)">注册</span></div>
<!--<div class="SignFlowHomepage-qrImage SignFlowHomepage-qrImageHidden"><div></div></div>-->
</div>
</div>
<button class="Button SignFlowHomepage-downloadBtn" type="button">下载知乎 App</button>
</div>

<footer class="SignFlowHomepage-footer">
<div class="ZhihuRights">
<span>© 2018 知乎</span>
<a target="_blank" rel="noopener noreferrer" href="http://www.miibeian.gov.cn/">京 ICP 证 110745 号</a>
<span>京公网安备 11010802010035 号<a href="http://zhstatic.zhihu.com/assets/zhihu/publish-license.jpg" target="_blank" rel="noopener noreferrer">出版物经营许可证</a></span>
</div>
<div class="ZhihuReports">
<a target="_blank" rel="noopener noreferrer" href="https://zhuanlan.zhihu.com/p/28852607">侵权举报</a>
<a target="_blank" rel="noopener noreferrer" href="http://www.12377.cn">网上有害信息举报专区</a>
<a target="_blank" rel="noopener noreferrer" href="/jubao">儿童色情信息举报专区</a>
<span>违法和不良信息举报：010-82716601</span>
</div>
</footer>
</div>
</main>


</div>
</div>
</body></html>