<!DOCTYPE html>
<html lang="zh" data-hairline="true" data-theme="light" data-focus-method="pointer" style="">
{% include 'question/head.html' %}
<body class="Entry-body">
{% include 'question/header.html' %}

<main role="main" class="App-main" data-module="topic" data-dfs-main='{"logged":"{{logged}}","type":"{{type}}","user_id":"{{user.id}}","user_name":"{{user.first_name}}","topic_id":"{{topic.id}}","topic_name":"{{topic.name}}","topic_avatar":"{{topic.avatar}}","topic_detail":"{{topic.detail}}","topic_question_nums":"{{topic.question_nums}}","topic_article_nums":"{{topic.article_nums}}","topic_follower_nums":"{{topic.follower_nums}}"}'>
<div class="ContentLayout">

<div class="ContentLayout-mainColumn">
<div class="Card">

<div class="TopicCard" data-topic-id="{{topic.id}}">
<div class="ContentItem TopicCard-content">

<div class="ContentItem-main">
<div class="ContentItem-image">
{% if user.is_staff %}
<div class="ImageWrapper TopicCard-image TopicCard-image-editor Avatar-editor">
{% else %}
<div class="ImageWrapper TopicCard-image">
{% endif %}
<img id="id_avatar" alt="{{topic.name}}" src="{{topic.avatar}}" style="width:100px;height:100px;">

<div class="Mask UserAvatarEditor-mask Mask-hidden">
<div class="Mask-mask Mask-mask--black UserAvatarEditor-maskInner">
</div>
<div class="Mask-content">
<svg class="Zi Zi--Camera UserAvatarEditor-cameraIcon" fill="currentColor" viewBox="0 0 24 24" width="36" height="36"><path d="M20.094 6S22 6 22 8v10.017S22 20 19 20H4.036S2 20 2 18V7.967S2 6 4 6h3s1-2 2-2h6c1 0 2 2 2 2h3.094zM12 16a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7zm0 1.5a5 5 0 1 0-.001-10.001A5 5 0 0 0 12 17.5zm7.5-8a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" fill-rule="evenodd"></path></svg>
<div class="1UserAvatarEditor-maskInnerText">修改图片</div>
</div>
</div>

<input id="id_avatar_input" name="file" type="file" accept="image/png,image/jpeg" style="display: none;"/>
</div>

</div>

<div class="ContentItem-head">
<h2 class="ContentItem-title">
<div class="TopicCard-title">
<h1 class="TopicCard-titleText"></h1></div></h2>
<div class="ContentItem-meta">
<div class="TopicCard-description">
<span class="RichText"></span>
</div>
</div>
</div>

</div>
</div>

<div class="TopicCard-actions">
<div class="TopicActions">
{% ifequal followed "true"%}
<button class="Button FollowButton TopicActions-followButton Button--primary Button--grey" type="button" data-topic-id="{{topic.id}}" data-follow-type="topic" data-followed="true">已关注</button>
{% else %}
<button class="Button FollowButton TopicActions-followButton Button--primary Button--green" type="button" data-topic-id="{{topic.id}}" data-follow-type="topic" data-followed="false">关注</button>
{% endifequal %}
<div class="Popover ShareMenu TopicActions-shareMenu"><div class="" aria-haspopup="true" aria-expanded="false"><button class="Button Button--plain Button--withIcon Button--withLabel" type="button"><span style="display:inline-flex;align-items:center;">&#8203;<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button></div></div>
</div>
</div>


</div>


</div>

<div class="Card">
<div class="Topic-bar">
<ul role="tablist" class="Tabs Topic-tabs">
<!--append-->
</ul>
</div>
<div class="Sticky" style="margin:10px 0px;border-top: 1px solid #e7eaf1;"></div>
<div id="appendArea" class="List"></div>
</div>
</div>


<div class="ContentLayout-sideColumn">
<div class="TopstorySideBar">
    <div class="Card"><div class="NumberBoard NumberBoard--divider"><button class="Button NumberBoard-item TopicNumberBoard-item" type="button"><div class="NumberBoard-itemInner"><div class="NumberBoard-itemName">关注者</div><strong class="NumberBoard-itemValue NumberBoard-value" data-update-value-type="topic-followed">{{topic.follower_nums}}</strong></div></button><a class="NumberBoard-item TopicNumberBoard-item" href="/topic/{{topic.id}}"><div class="NumberBoard-itemInner"><div class="NumberBoard-itemName">问题数</div><strong class="NumberBoard-itemValue">{{topic.question_nums}}</strong></div></a></div></div>
    <div class="Card">
    {% include 'question/sidebar_navlist.html' %}
    </div>
{% include 'question/footer.html' %}
</div>
</div>
</div>
</main>

<!-- ask（Modal） -->
{% include 'question/ask_modal.html' %}
<!-- ask（Modal） -->

<!-- letter（Modal） -->
<!-- append by js -->
<!-- letter（Modal） -->
<div id="upAvatarModal" class="modal fade 1Modal 1Modal--default 1UploadImageModal-modal" tabindex="-1" role="dialog" 1aria-labelledby="upAvatarModalLabel" 1aria-hidden="true">
<div class="modal-dialog" style="#width:200px;">

<div class="Modal-inner">
<h3 class="Modal-title">编辑图片</h3>
<div class="Modal-subtitle">调整图片尺寸和位置</div>
<div class="Modal-content">
<div>
<div class="UploadImageModal-container">
<div style="text-align:center">
<img id="preview_avatar" width="300px" height="300px" alt="" >
</div>
<div  id="chooseBox" style="width: 200px;height: 200px;border: 1px solid #4fb8e3;position: absolute;left: 200px;top: 163px;z-index: 1000"></div>
<canvas id="avatar_canvas" width="200" height="200" style="width: 200px; height: 200px;display:none"></canvas>
</div>
<div style="text-align:center">
<svg class="Zi Zi--Size" fill="currentColor" viewBox="0 0 24 24" width="18" height="18"><path d="M16.296 7h.697A1.01 1.01 0 0 1 18 8.003v10.995c0 .554-.45 1.003-1.007 1.003H4.007A1.01 1.01 0 0 1 3 18.998V8.003C3 7.449 3.45 7 4.007 7h12.289zm-.892 11a.6.6 0 0 0 .597-.601V9.601A.597.597 0 0 0 15.405 9H5.596A.599.599 0 0 0 5 9.602v7.797c0 .335.267.601.596.601h9.808zM7 4h13a1 1 0 0 1 1 1v11a1 1 0 0 1-2 0V6.5c0-.5-.5-.5-.5-.5H7a1 1 0 0 1 0-2z" fill-rule="evenodd"></path></svg>
<input id="adjust_choosebox"type="range" step="1" min="0" max="100" class="RangeInput" value="50" style="display:inline" oninput="adjustChooseBox()">
<svg class="Zi Zi--Size" fill="currentColor" viewBox="0 0 24 24" width="22" height="22"><path d="M16.296 7h.697A1.01 1.01 0 0 1 18 8.003v10.995c0 .554-.45 1.003-1.007 1.003H4.007A1.01 1.01 0 0 1 3 18.998V8.003C3 7.449 3.45 7 4.007 7h12.289zm-.892 11a.6.6 0 0 0 .597-.601V9.601A.597.597 0 0 0 15.405 9H5.596A.599.599 0 0 0 5 9.602v7.797c0 .335.267.601.596.601h9.808zM7 4h13a1 1 0 0 1 1 1v11a1 1 0 0 1-2 0V6.5c0-.5-.5-.5-.5-.5H7a1 1 0 0 1 0-2z" fill-rule="evenodd"></path></svg>
</div>
<div class="ModalButtonGroup ModalButtonGroup--vertical">
<button class="Button Button--primary Button--green AvatarSave" type="button" data-avatar-type="forTopicAvatar">保存</button>
</div>
</div>
</div>
</div>
<button data-dismiss="modal" class="Button Modal-closeButton Button--plain" aria-label="关闭" type="button">
<svg class="Zi Zi--Close Modal-closeIcon" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M13.486 12l5.208-5.207a1.048 1.048 0 0 0-.006-1.483 1.046 1.046 0 0 0-1.482-.005L12 10.514 6.793 5.305a1.048 1.048 0 0 0-1.483.005 1.046 1.046 0 0 0-.005 1.483L10.514 12l-5.208 5.207a1.048 1.048 0 0 0 .006 1.483 1.046 1.046 0 0 0 1.482.005L12 13.486l5.207 5.208a1.048 1.048 0 0 0 1.483-.006 1.046 1.046 0 0 0 .005-1.482L13.486 12z" fill-rule="evenodd"></path></svg>
</button>
</div>
</div>

</body>

</html>